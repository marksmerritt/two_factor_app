<div class="container">
  <nav class="nav">
    <%= link_to "Home", root_path, class: "nav-link" %>
  </nav>

  <h1>Set Up Two-Factor Authentication</h1>
  
  <p>Scan this QR code with your authenticator app (Google Authenticator, Authy, Microsoft Authenticator, etc.):</p>
  
  <div class="qr-code">
    <%= raw @qr_code_svg %>
  </div>
  
  <p><strong>Or enter this code manually:</strong></p>
  <div class="secret-code">
    <%= current_user.otp_secret %>
  </div>
  
  <p>After scanning the QR code, enter the 6-digit code from your authenticator app to enable two-factor authentication:</p>
  
  <%= form_with url: two_factor_setup_enable_path, method: :post, local: true do |form| %>
    <div class="form-group">
      <%= form.label :code, "Verification Code" %>
      <%= form.text_field :code, 
          placeholder: "000000", 
          maxlength: 6, 
          pattern: "[0-9]{6}",
          class: "code-input",
          autocomplete: "off",
          autofocus: true %>
    </div>
    
    <%= form.submit "Enable Two-Factor Authentication", class: "btn btn-primary" %>
  <% end %>
  
  <p class="mt-2 text-center">
    <%= link_to "Skip for now", root_path, class: "btn btn-secondary" %>
  </p>
</div>

